<!DOCTYPE html>
<head>
	<title>BlockRace</title>
	<style>
		body{
			position: relative;
			border: 1px solid black;
			height: 480px;
			width: 800px;
		}
		
		.panel{
			border: 1px solid black;
			border-radius: 10px;
			margin: 2px;
		}
		
		.activeChains{
			position: absolute;
			top: 0px;
			left: 0px;
			height: 474px;
			width: 120px;
		}
		
		.chainSelect{
			height: 114px;
			width: 114px;
			overflow: hidden;
		}
		
		.chainSelect img, .chainOption img{
			width: 100%;
		}
		
		.selected{
			opacity: 0.5;
			background-color: grey;
		}
		
		.chooser{
			position: absolute;
			top: 0px;
			left: 124px;
			height: 474px;
			width: 670px;
			overflow: hidden;
			z-index: 10;
			display: none;
		}
		
		.chainOption{
			display: inline-block;
			height: 140px;
			width: 100px;
			overflow: hidden;
		}
		
		.optionName{
			text-transform: capitalize;
			display: inline-block;
			text-align: center;
			width: 100%;
		}

	</style>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
	<div class="panel activeChains">
		<div class="chainSelect panel" data-track="1">
		</div>
		<div class="chainSelect panel" data-track="2">
		</div>
		<div class="chainSelect panel" data-track="3">
		</div>
		<div class="chainSelect panel" data-track="4">
		</div>
	</div>
		<div class="panel chooser">
		</div>
</body>
<script>
	// ***
	// GET DETAILS & BUILD UI
	// ***
	chains = [	{name:	'bitcoin'},
				{name:	'bitcoin-cash'},
				{name:	'dash'},
				{name:	'decred'},
				{name:	'dogecoin'},
				{name:	'ethereum-classic'},
				{name:	'ethereum'},
				{name:	'litecoin'},
				{name:	'monero'},
				{name:	'namecoin'},
				{name:	'nem'},
				{name:	'viacoin'},
				{name:	'zcash'},
			];
	$(chains).each(function(i,v){
		var newOpt = `	<div class="chainOption panel" data-name=` + v.name + `>
							<img src="i/128/` + v.name + `.png">
							<br>
							<span class="optionName">` + v.name + `</span>
						</div>`;
		$('.chooser').append(newOpt);
	});
	
	// ***
	// UI FUNCTIONALITY
	// ***
	// choose a track on which to select a chain
	$('.chainSelect').click(function(){
		if(!$(this).hasClass('selected')){
			$('.selected').removeClass('selected');
			$(this).addClass('selected');
			showChooser(true);
		} else {
			$('.selected').removeClass('selected');
			showChooser(false);
		}
	});

	// select a chain for the chosen track
	$('.chainOption').click(function(){
		var name = $(this).data('name')
		$('.selected').html("	<img src='i/128/" + name + ".png'>");
		showChooser(false);
		var track = $('.selected').data('track');
		$('.selected').removeClass('selected');
		// send command to server to update hardware
		$.post("/", {track: track, name: name}, function(data){console.log(data);});
	});
	
	
	// reveal chain chooser menu
	function showChooser(show){
		if (show)
			$('.chooser').css('display', 'block')
		else
			$('.chooser').css('display', 'none')	
	}
</script>
</html>